{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammadghally/Documents/eventhub-beta/eventhub-beta/app/%28auth%29/signin/page.tsx"],"sourcesContent":["'use client';\n\nimport Link from \"next/link\";\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { signIn, getSession } from \"next-auth/react\";\n\nexport default function SignIn() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const router = useRouter();\n\n  // Function to determine user role from email\n  const getUserRoleFromEmail = (email: string): string => {\n    // Check email patterns to determine role\n    const emailLower = email.toLowerCase();\n    \n    // Organizer patterns\n    if (emailLower.includes('organizer') || \n        emailLower.includes('event') || \n        emailLower.includes('music') ||\n        emailLower.includes('company') ||\n        emailLower.includes('corp') ||\n        emailLower.includes('organization')) {\n      return 'ORGANIZER';\n    }\n    \n    // Admin users should use the admin signin page\n    if (emailLower.includes('admin')) {\n      throw new Error('Admin users should use the admin signin page at /admin/signin');\n    }\n    \n    // Default to user role\n    return 'USER';\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n    \n    try {\n      // For testing purposes, create a mock signin that works with our burger menu\n      // In production, this would authenticate against the database\n      if (email && password) {\n        \n        // Determine role from email\n        let userRole: string;\n        try {\n          userRole = getUserRoleFromEmail(email);\n        } catch (roleError: any) {\n          setError(roleError.message);\n          setIsLoading(false);\n          return;\n        }\n        \n        // Mock user data based on email for testing\n        const mockUserData = {\n          email,\n          role: userRole,\n          name: userRole === 'ORGANIZER' ? 'Music Events Indonesia' : 'Ahmad Rahman',\n          id: '1'\n        };\n\n        // Store in session storage for mock session\n        sessionStorage.setItem('mockUser', JSON.stringify(mockUserData));\n        \n        // For now, we'll use a simple redirect since the database isn't set up\n        // Redirect based on detected role\n        if (userRole === 'ORGANIZER') {\n          router.push('/organizer');\n        } else {\n          router.push('/');\n        }\n        \n        // Force page refresh to update session state\n        window.location.reload();\n      } else {\n        setError('Please fill in all fields');\n      }\n    } catch (error) {\n      console.error('Sign in error:', error);\n      setError('Sign in failed. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"mb-10\">\n        <h1 className=\"text-4xl font-bold\">Sign in to EventHub</h1>\n        <p className=\"text-gray-600 mt-2\">\n          Access your account to manage events or book tickets\n        </p>\n      </div>\n\n      {/* Form */}\n      <form onSubmit={handleSubmit}>\n        <div className=\"space-y-4\">\n          <div>\n            <label\n              className=\"mb-1 block text-sm font-medium text-gray-700\"\n              htmlFor=\"email\"\n            >\n              Email\n            </label>\n            <input\n              className=\"form-input w-full py-2\"\n              id=\"email\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"Enter your email address\"\n              required\n            />\n          </div>\n          <div>\n            <label\n              className=\"mb-1 block text-sm font-medium text-gray-700\"\n              htmlFor=\"password\"\n            >\n              Password\n            </label>\n            <input\n              className=\"form-input w-full py-2\"\n              id=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              autoComplete=\"current-password\"\n              placeholder=\"••••••••\"\n              required\n            />\n          </div>\n        </div>\n\n        {/* Demo Credentials */}\n        <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n          <p className=\"text-xs text-gray-600 mb-2\">Demo Credentials:</p>\n          <div className=\"text-xs text-gray-500 space-y-2\">\n            <div>\n              <strong>Regular User:</strong> user@demo.com / demo123\n            </div>\n            <div>\n              <strong>Event Organizer:</strong> organizer@eventcompany.com / demo123\n            </div>\n            <div className=\"text-xs text-gray-400 mt-2\">\n              * Role is automatically detected from email address\n            </div>\n          </div>\n        </div>\n\n        {/* Error Message */}\n        {error && (\n          <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n            <p className=\"text-sm text-red-600\">{error}</p>\n          </div>\n        )}\n\n        <div className=\"mt-6\">\n          <button \n            type=\"submit\"\n            disabled={isLoading}\n            className=\"btn w-full bg-linear-to-t from-blue-600 to-blue-500 bg-[length:100%_100%] bg-[bottom] text-white shadow-sm hover:bg-[length:100%_150%] disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {isLoading ? 'Signing in...' : 'Sign In'}\n          </button>\n        </div>\n      </form>\n\n      {/* Bottom links */}\n      <div className=\"mt-6 text-center space-y-2\">\n        <div>\n          <Link\n            className=\"text-sm text-gray-700 underline hover:no-underline\"\n            href=\"/reset-password\"\n          >\n            Forgot password\n          </Link>\n        </div>\n        <div>\n          <Link\n            className=\"text-sm text-blue-600 underline hover:no-underline\"\n            href=\"/\"\n          >\n            Continue as Guest (Browse Only)\n          </Link>\n        </div>\n        <div className=\"border-t border-gray-200 pt-4 mt-4\">\n          <p className=\"text-xs text-gray-500 mb-2\">Administrator?</p>\n          <Link\n            className=\"text-sm font-medium text-red-600 hover:text-red-700 underline hover:no-underline\"\n            href=\"/admin/signin\"\n          >\n            Admin Sign In →\n          </Link>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammadghally/Documents/eventhub-beta/eventhub-beta/node_modules/.pnpm/next%4015.1.6_%40babel%2Bcore%407.28.4_react-dom%4019.0.0_react%4019.0.0__react%4019.0.0/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}