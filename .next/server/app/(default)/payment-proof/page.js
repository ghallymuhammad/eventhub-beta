(()=>{var e={};e.id=655,e.ids=[655],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},59446:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=s(79266),r=s(86261),n=s(5773),l=s.n(n),o=s(95650),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let d=["",{children:["(default)",{children:["payment-proof",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,99585)),"/Users/muhammadghally/Documents/eventhub-beta/eventhub-beta/app/(default)/payment-proof/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,76012)),"/Users/muhammadghally/Documents/eventhub-beta/eventhub-beta/app/(default)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57587,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,16750,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,72119,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,29279)),"/Users/muhammadghally/Documents/eventhub-beta/eventhub-beta/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57587,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,16750,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,72119,23)),"next/dist/client/components/unauthorized-error"]}],c=["/Users/muhammadghally/Documents/eventhub-beta/eventhub-beta/app/(default)/payment-proof/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(default)/payment-proof/page",pathname:"/payment-proof",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},43572:(e,t,s)=>{Promise.resolve().then(s.bind(s,99585))},96308:(e,t,s)=>{Promise.resolve().then(s.bind(s,26217))},26217:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(594),r=s(10955),n=s(2708),l=s(89318),o=s(26542);function i(){let{data:e}=(0,l.useSession)(),t=(0,n.useSearchParams)(),s=(0,n.useRouter)(),i=t.get("transaction"),[d,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),[x,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[f,j]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),v=async()=>{if(!p||!i){o.default.error("Please select a file");return}try{h(!0);let e=new FormData;e.append("paymentProof",p),e.append("transactionId",i);let t=await fetch("/api/transactions/payment-proof",{method:"POST",body:e}),a=await t.json();a.success?(o.default.success("Payment proof uploaded successfully!"),s.push("/profile?tab=transactions")):o.default.error(a.error||"Failed to upload payment proof")}catch(e){o.default.error("Failed to upload payment proof")}finally{h(!1)}},N=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e);return m?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Upload Payment Proof"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Please upload your payment proof to complete the transaction"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Time Remaining"}),g?(0,a.jsx)("div",{className:"text-4xl font-bold text-red-600 mb-2",children:"EXPIRED"}):(0,a.jsx)("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:f}),(0,a.jsx)("p",{className:"text-gray-600",children:g?"Payment deadline has passed. This transaction will be cancelled.":"Upload your payment proof before the deadline"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transaction Details"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Event:"}),(0,a.jsx)("span",{className:"font-medium",children:d.event.title})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Date:"}),(0,a.jsx)("span",{children:new Date(d.event.date).toLocaleDateString("id-ID")})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Location:"}),(0,a.jsx)("span",{children:d.event.location})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Original Amount:"}),(0,a.jsx)("span",{children:N(d.originalAmount)})]}),d.discountAmount>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Discount:"}),(0,a.jsxs)("span",{className:"text-green-600",children:["-",N(d.discountAmount)]})]}),d.pointsUsed>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Points Used:"}),(0,a.jsxs)("span",{className:"text-blue-600",children:[d.pointsUsed," points"]})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t pt-3",children:[(0,a.jsx)("span",{className:"text-gray-900 font-semibold",children:"Total Amount:"}),(0,a.jsx)("span",{className:"font-semibold text-lg",children:N(d.totalAmount)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Instructions"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"Bank Transfer"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Bank:"})," Bank Central Asia (BCA)"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Account Number:"})," 1234567890"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Account Name:"})," EventHub Indonesia"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Amount:"})," ",N(d.totalAmount)]})]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"Important:"})," Please transfer the exact amount and upload a clear screenshot or photo of your transfer receipt."]})})]})]}),!g&&"WAITING_PAYMENT"===d.status&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Payment Proof"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Image File"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/")){o.default.error("Please upload an image file");return}if(t.size>5242880){o.default.error("File size must be less than 5MB");return}b(t)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: JPG, PNG, GIF. Max size: 5MB"})]}),p&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Selected file: ",(0,a.jsx)("strong",{children:p.name})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Size: ",(p.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsx)("button",{onClick:v,disabled:!p||x,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:x?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Payment Proof"})]})]}),"WAITING_PAYMENT"!==d.status&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"text-center",children:["WAITING_CONFIRMATION"===d.status&&(0,a.jsxs)("div",{className:"text-yellow-600",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Payment Proof Uploaded"}),(0,a.jsx)("p",{children:"Your payment proof has been uploaded. Please wait for organizer confirmation."})]}),"DONE"===d.status&&(0,a.jsxs)("div",{className:"text-green-600",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Transaction Completed"}),(0,a.jsx)("p",{children:"Your transaction has been confirmed. Enjoy your event!"})]}),"REJECTED"===d.status&&(0,a.jsxs)("div",{className:"text-red-600",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Transaction Rejected"}),(0,a.jsx)("p",{children:"Your transaction has been rejected. Please contact support if you believe this is an error."})]})]})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Transaction Not Found"}),(0,a.jsx)("button",{onClick:()=>s.push("/profile"),className:"text-blue-600 hover:text-blue-700",children:"Back to Profile"})]})})}},99585:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(13538).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/muhammadghally/Documents/eventhub-beta/eventhub-beta/app/(default)/payment-proof/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/muhammadghally/Documents/eventhub-beta/eventhub-beta/app/(default)/payment-proof/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[724,648,586,835,494,135],()=>s(59446));module.exports=a})();